詳解 シェルスクリプト
==========

目的
----
* シェルスクリプト書いて自動化する機会が多いので一度きちんとした本を読んでおきたい。
* Linuxの基礎に詳しくなる。シェルに親しんで効果的で合理的なオペレーションができるようになる。。

概要
----
* 1章 イントロダクション
  * いわゆるUNIX的なソフトウェア開発思想の解説。
* 2章 さあ始めよう
  * 簡単な導入。
  * デバッグの仕方（set -x）。
  * ロケールの話。
* 3章 文字列の検索と置換
  * awk, cut, grep, sed等。
* 4章 文字列処理ツール
  * sort, uniq, wc等を使った文字列の整形、解析。
* 5章 パイプラインの魔法
* 6章 変数、条件分岐、繰り返し
  * 変数、特殊変数、算術展開。
  * getoptとループを使ったオプションの処理。
  * 関数
* 7章 入出力、ファイル、コマンドの評価
  * ファイルディスクリプタの話
  * exprは使うべきではない（代替手段がいくつもある）
  * 組み込みコマンドとcommandによる関数の処理
* 8章 実践的なスクリプトの例
  * 実際にスクリプトの事例紹介。一番役立つ。
  * 引数の処理、versionやusage関数、basenameの活用、エラー処理。
* 9章 ファイル操作
  * 一時ファイル作成時の/tmpの使い方、ファイルの探索、xargsの使い方等。
* 10章 移植性と独自の拡張
  * 本書は全体的に古いバージョンのbashがベースになっているので、新しいバージョンで使えるものの話を含む。
  * 例えば[[]]、ブレース展開、配列展開等。
* 11章 シェルスクリプトとセキュリティ
  * PATHにカレントディレクトリを含めない
  * binディレクトリを保護する
  * スクリプトを作成する前に設計を練る
  * すべての引数について正しさをチェックする
  * エラーの可能性のあるコマンドについては、すべて終了ステータスをチェックする
  * 環境変数の値を信用しない
  * よく知られているディレクトリで処理を開始する
  * コマンドへの絶対パスを指定する
  * syslogを使って実行状況を監視する（loggerを使う）
  * ユーザーからの入力は必ずクオートする
  * ユーザーからの入力に対してevalしない
  * ワイルドカード展開の結果をクオートする
  * ユーザーからの入力にメタ文字がないかチェックする
  * スクリプトのチェックやてエストを厳密に行う
  * 同時に実行される場合を考慮する
  * シンボリックリンクを使う
  * 可能な限りsetuidではなくsetgidを使う
  * rootの代わりに新規ユーザーを使う

目的に対する成果
----
* だいぶ役立った。開発者じゃない人（オペレーター？）向けに言語設計の基礎っぽい事項もあってよい。
* ただ内容的に古い部分も散見されるようなので、モダンな方法は別でさらいたい。
* これを通じて自分なりのコーディングスタイルを持っておきたい。

活用方針
----
* セキュリティに関しては特に注意する。今後の教訓にする。
* コーディングスタイルを確立して今後長く使えるようにする。

不明点
----
* 出てきているコマンドでわからないものは調べて使えるようになる。
* POSIXを押さえているわけではないので、可能なら押さえておく。
* 最近もシェルスクリプト主流？ 他に使えるシェル用ツールがあるなら考えたい。