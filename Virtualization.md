準仮想化と完全仮想化
----

### 準仮想化

* ハイパーバイザーがハードウェアを完全にはエミュレートしない。
* ハイパーバイザーの実装としてはシンプルになる。
* ゲストOSのスーパーバイザーコール（システムコール）をハイパーバイザーコールへ変換して実行する。従ってゲストOSには手を加える必要がある。

### 完全仮想化

* ハイパーバイザーがハードウェアを完全にエミュレートする。
* ゲストOSは完全エミュレートされたハードウェア上にあるため、リングプロテクションにおける特権レベル（リング0）の命令を発行しようとするが、実際にはリング3で動いているため例外が発生する。ホストOSはこれを監視して変換、実行する（バイナリトランスレーション）ためオーバーヘッドが生じる。
  * この点を解消するため、VMXroot/nonrootモードを設け、前者をハイパーバイザーに持たせ、例外を発生させることなくモードの切替を行うのがIntel VT等に見られる仮想化支援技術。

ハイパーバイザーとスーパーバイザー
----

* いわゆるカーネルがスーパーバイザーと呼ばれ、スーパーバイザーをさらに上位で管理するものという意味でハイパーバイザーと呼ばれる。

リングプロテクション
----

* データや機能を保護するための特権命令の階層構造。
* リング0が最も中心、リング3が最も外側の同心円状のモデルを描く。一般的には特権命令を実行するカーネルモードがリング0、特権命令を実施しないユーザーモードがリング3に割り当てられ、リング1と2は利用されない。
* リング間を越権するには、決められた手順で「ゲート」を通る必要があり（いわゆるシステムコール）、外側のリングが内側の権限を乱用することはできないようになっている。

参考
----

* [インテル バーチャライゼーション・テクノロジー - Wikipedia](https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%B3%E3%83%86%E3%83%AB_%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%A9%E3%82%A4%E3%82%BC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%BB%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC)
* [リングプロテクション - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%97%E3%83%AD%E3%83%86%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3)
* [CPUモード - Wikipedia](https://ja.wikipedia.org/wiki/CPU%E3%83%A2%E3%83%BC%E3%83%89)
* [コンピュータ基礎の基礎～仮想マシン支援機構 | 艦長日誌・私的記録 DS9](http://gshoes.planex.ddns.vc/freo/index.php/view/395)